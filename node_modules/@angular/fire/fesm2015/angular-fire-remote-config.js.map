{"version":3,"file":"angular-fire-remote-config.js","sources":["../../../src/remote-config/remote-config.ts","../../../src/remote-config/remote-config.module.ts","../../../src/remote-config/rxfire.ts","../../../src/remote-config/overrides.ts","../../../src/remote-config/firebase.ts","../../../src/remote-config/angular-fire-remote-config.ts"],"sourcesContent":["import { RemoteConfig as FirebaseRemoteConfig } from 'firebase/remote-config';\nimport { ɵgetAllInstancesOf } from '@angular/fire';\nimport { from, timer } from 'rxjs';\nimport { concatMap, distinct } from 'rxjs/operators';\n\n// see notes in core/firebase.app.module.ts for why we're building the class like this\n// tslint:disable-next-line:no-empty-interface\nexport interface RemoteConfig extends FirebaseRemoteConfig {}\n\nexport class RemoteConfig {\n  constructor(remoteConfig: FirebaseRemoteConfig) {\n    return remoteConfig;\n  }\n}\n\nexport const REMOTE_CONFIG_PROVIDER_NAME = 'remote-config';\n\n// tslint:disable-next-line:no-empty-interface\nexport interface RemoteConfigInstances extends Array<FirebaseRemoteConfig> {}\n\nexport class RemoteConfigInstances {\n  constructor() {\n    return ɵgetAllInstancesOf<FirebaseRemoteConfig>(REMOTE_CONFIG_PROVIDER_NAME);\n  }\n}\n\nexport const remoteConfigInstance$ = timer(0, 300).pipe(\n  concatMap(() => from(ɵgetAllInstancesOf<FirebaseRemoteConfig>(REMOTE_CONFIG_PROVIDER_NAME))),\n  distinct(),\n);\n","import { NgModule, Optional, NgZone, InjectionToken, ModuleWithProviders, Injector, APP_INITIALIZER } from '@angular/core';\nimport { RemoteConfig as FirebaseRemoteConfig } from 'firebase/remote-config';\nimport { ɵgetDefaultInstanceOf, ɵAngularFireSchedulers, VERSION, ɵisRemoteConfigSupportedFactory } from '@angular/fire';\nimport { RemoteConfig, RemoteConfigInstances, REMOTE_CONFIG_PROVIDER_NAME } from './remote-config';\nimport { FirebaseApps, FirebaseApp } from '@angular/fire/app';\nimport { registerVersion } from 'firebase/app';\n\nexport const PROVIDED_REMOTE_CONFIG_INSTANCES = new InjectionToken<RemoteConfig[]>('angularfire2.remote-config-instances');\n\nexport function defaultRemoteConfigInstanceFactory(\n  provided: FirebaseRemoteConfig[]|undefined,\n  defaultApp: FirebaseApp,\n) {\n  if (!ɵisRemoteConfigSupportedFactory.sync()) { return null; }\n  const defaultRemoteConfig = ɵgetDefaultInstanceOf<FirebaseRemoteConfig>(REMOTE_CONFIG_PROVIDER_NAME, provided, defaultApp);\n  return defaultRemoteConfig && new RemoteConfig(defaultRemoteConfig);\n}\n\nexport function remoteConfigInstanceFactory(fn: (injector: Injector) => FirebaseRemoteConfig) {\n  return (zone: NgZone, injector: Injector) => {\n    if (!ɵisRemoteConfigSupportedFactory.sync()) { return null; }\n    const remoteConfig = zone.runOutsideAngular(() => fn(injector));\n    return new RemoteConfig(remoteConfig);\n  };\n}\n\nconst REMOTE_CONFIG_INSTANCES_PROVIDER = {\n  provide: RemoteConfigInstances,\n  deps: [\n    [new Optional(), PROVIDED_REMOTE_CONFIG_INSTANCES ],\n  ]\n};\n\nconst DEFAULT_REMOTE_CONFIG_INSTANCE_PROVIDER = {\n  provide: RemoteConfig,\n  useFactory: defaultRemoteConfigInstanceFactory,\n  deps: [\n    [new Optional(), PROVIDED_REMOTE_CONFIG_INSTANCES ],\n    FirebaseApp,\n  ]\n};\n\n@NgModule({\n  providers: [\n    DEFAULT_REMOTE_CONFIG_INSTANCE_PROVIDER,\n    REMOTE_CONFIG_INSTANCES_PROVIDER,\n    {\n      provide: APP_INITIALIZER,\n      useValue: ɵisRemoteConfigSupportedFactory.async,\n      multi: true,\n    },\n  ]\n})\nexport class RemoteConfigModule {\n  constructor() {\n    registerVersion('angularfire', VERSION.full, 'rc');\n  }\n}\n\nexport function provideRemoteConfig(\n  fn: (injector: Injector) => FirebaseRemoteConfig, ...deps: any[]\n): ModuleWithProviders<RemoteConfigModule> {\n  return {\n    ngModule: RemoteConfigModule,\n    providers: [{\n      provide: PROVIDED_REMOTE_CONFIG_INSTANCES,\n      useFactory: remoteConfigInstanceFactory(fn),\n      multi: true,\n      deps: [\n        NgZone,\n        Injector,\n        ɵAngularFireSchedulers,\n        FirebaseApps,\n        ...deps,\n      ]\n    }]\n  };\n}\n","// DO NOT MODIFY, this file is autogenerated by tools/build.ts\nimport { ɵzoneWrap } from '@angular/fire';\nimport {\n  getValue as _getValue,\n  getString as _getString,\n  getNumber as _getNumber,\n  getBoolean as _getBoolean,\n  getAll as _getAll\n} from 'rxfire/remote-config';\n\nexport const getValueChanges = ɵzoneWrap(_getValue, true);\nexport const getStringChanges = ɵzoneWrap(_getString, true);\nexport const getNumberChanges = ɵzoneWrap(_getNumber, true);\nexport const getBooleanChanges = ɵzoneWrap(_getBoolean, true);\nexport const getAllChanges = ɵzoneWrap(_getAll, true);\n","import { ɵisRemoteConfigSupportedFactory } from '@angular/fire';\n\nexport const isSupported = ɵisRemoteConfigSupportedFactory.async;\n","// DO NOT MODIFY, this file is autogenerated by tools/build.ts\nexport * from 'firebase/remote-config';\nimport { ɵzoneWrap } from '@angular/fire';\nimport {\n  activate as _activate,\n  ensureInitialized as _ensureInitialized,\n  fetchAndActivate as _fetchAndActivate,\n  fetchConfig as _fetchConfig,\n  getAll as _getAll,\n  getBoolean as _getBoolean,\n  getNumber as _getNumber,\n  getRemoteConfig as _getRemoteConfig,\n  getString as _getString,\n  getValue as _getValue,\n  setLogLevel as _setLogLevel\n} from 'firebase/remote-config';\n\nexport {\n  isSupported\n} from './overrides';\n\nexport const activate = ɵzoneWrap(_activate, true);\nexport const ensureInitialized = ɵzoneWrap(_ensureInitialized, true);\nexport const fetchAndActivate = ɵzoneWrap(_fetchAndActivate, true);\nexport const fetchConfig = ɵzoneWrap(_fetchConfig, true);\nexport const getAll = ɵzoneWrap(_getAll, true);\nexport const getBoolean = ɵzoneWrap(_getBoolean, true);\nexport const getNumber = ɵzoneWrap(_getNumber, true);\nexport const getRemoteConfig = ɵzoneWrap(_getRemoteConfig, true);\nexport const getString = ɵzoneWrap(_getString, true);\nexport const getValue = ɵzoneWrap(_getValue, true);\nexport const setLogLevel = ɵzoneWrap(_setLogLevel, true);\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["_getValue","_getString","_getNumber","_getBoolean","_getAll","_activate","_ensureInitialized","_fetchAndActivate","_fetchConfig","_getRemoteConfig","_setLogLevel"],"mappings":"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"}