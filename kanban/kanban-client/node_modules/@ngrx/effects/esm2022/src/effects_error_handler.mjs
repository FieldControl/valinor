import { catchError } from 'rxjs/operators';
const MAX_NUMBER_OF_RETRY_ATTEMPTS = 10;
export function defaultEffectsErrorHandler(observable$, errorHandler, retryAttemptLeft = MAX_NUMBER_OF_RETRY_ATTEMPTS) {
    return observable$.pipe(catchError((error) => {
        if (errorHandler)
            errorHandler.handleError(error);
        if (retryAttemptLeft <= 1) {
            return observable$; // last attempt
        }
        // Return observable that produces this particular effect
        return defaultEffectsErrorHandler(observable$, errorHandler, retryAttemptLeft - 1);
    }));
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZWZmZWN0c19lcnJvcl9oYW5kbGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vbW9kdWxlcy9lZmZlY3RzL3NyYy9lZmZlY3RzX2Vycm9yX2hhbmRsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBR0EsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBTzVDLE1BQU0sNEJBQTRCLEdBQUcsRUFBRSxDQUFDO0FBRXhDLE1BQU0sVUFBVSwwQkFBMEIsQ0FDeEMsV0FBMEIsRUFDMUIsWUFBMEIsRUFDMUIsbUJBQTJCLDRCQUE0QjtJQUV2RCxPQUFPLFdBQVcsQ0FBQyxJQUFJLENBQ3JCLFVBQVUsQ0FBQyxDQUFDLEtBQUssRUFBRSxFQUFFO1FBQ25CLElBQUksWUFBWTtZQUFFLFlBQVksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbEQsSUFBSSxnQkFBZ0IsSUFBSSxDQUFDLEVBQUUsQ0FBQztZQUMxQixPQUFPLFdBQVcsQ0FBQyxDQUFDLGVBQWU7UUFDckMsQ0FBQztRQUNELHlEQUF5RDtRQUN6RCxPQUFPLDBCQUEwQixDQUMvQixXQUFXLEVBQ1gsWUFBWSxFQUNaLGdCQUFnQixHQUFHLENBQUMsQ0FDckIsQ0FBQztJQUNKLENBQUMsQ0FBQyxDQUNILENBQUM7QUFDSixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRXJyb3JIYW5kbGVyIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tICdAbmdyeC9zdG9yZSc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBjYXRjaEVycm9yIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuXG5leHBvcnQgdHlwZSBFZmZlY3RzRXJyb3JIYW5kbGVyID0gPFQgZXh0ZW5kcyBBY3Rpb24+KFxuICBvYnNlcnZhYmxlJDogT2JzZXJ2YWJsZTxUPixcbiAgZXJyb3JIYW5kbGVyOiBFcnJvckhhbmRsZXJcbikgPT4gT2JzZXJ2YWJsZTxUPjtcblxuY29uc3QgTUFYX05VTUJFUl9PRl9SRVRSWV9BVFRFTVBUUyA9IDEwO1xuXG5leHBvcnQgZnVuY3Rpb24gZGVmYXVsdEVmZmVjdHNFcnJvckhhbmRsZXI8VCBleHRlbmRzIEFjdGlvbj4oXG4gIG9ic2VydmFibGUkOiBPYnNlcnZhYmxlPFQ+LFxuICBlcnJvckhhbmRsZXI6IEVycm9ySGFuZGxlcixcbiAgcmV0cnlBdHRlbXB0TGVmdDogbnVtYmVyID0gTUFYX05VTUJFUl9PRl9SRVRSWV9BVFRFTVBUU1xuKTogT2JzZXJ2YWJsZTxUPiB7XG4gIHJldHVybiBvYnNlcnZhYmxlJC5waXBlKFxuICAgIGNhdGNoRXJyb3IoKGVycm9yKSA9PiB7XG4gICAgICBpZiAoZXJyb3JIYW5kbGVyKSBlcnJvckhhbmRsZXIuaGFuZGxlRXJyb3IoZXJyb3IpO1xuICAgICAgaWYgKHJldHJ5QXR0ZW1wdExlZnQgPD0gMSkge1xuICAgICAgICByZXR1cm4gb2JzZXJ2YWJsZSQ7IC8vIGxhc3QgYXR0ZW1wdFxuICAgICAgfVxuICAgICAgLy8gUmV0dXJuIG9ic2VydmFibGUgdGhhdCBwcm9kdWNlcyB0aGlzIHBhcnRpY3VsYXIgZWZmZWN0XG4gICAgICByZXR1cm4gZGVmYXVsdEVmZmVjdHNFcnJvckhhbmRsZXIoXG4gICAgICAgIG9ic2VydmFibGUkLFxuICAgICAgICBlcnJvckhhbmRsZXIsXG4gICAgICAgIHJldHJ5QXR0ZW1wdExlZnQgLSAxXG4gICAgICApO1xuICAgIH0pXG4gICk7XG59XG4iXX0=