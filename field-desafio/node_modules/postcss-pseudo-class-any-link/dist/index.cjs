"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var t=e(require("postcss-selector-parser"));function s(e){if(!e||!e.nodes)return;let s=[];const o=[...e.nodes];for(let e=0;e<o.length+1;e++){const l=o[e];if(l&&"combinator"!==l.type)s.push(l);else{if(s.length>1){const e=t.default.selector({value:""});s[0].replaceWith(e),s.slice(1).forEach((e=>{e.remove()})),s.forEach((t=>{e.append(t)})),n(e),e.replaceWith(...e.nodes)}s=[]}}}function n(e){e&&e.nodes&&e.nodes.sort(((e,t)=>"selector"===e.type&&"selector"===t.type&&e.nodes.length&&t.nodes.length?o(e.nodes[0].value,e.nodes[0].type)-o(t.nodes[0].value,t.nodes[0].type):"selector"===e.type&&e.nodes.length?o(e.nodes[0].value,e.nodes[0].type)-o(t.value,t.type):"selector"===t.type&&t.nodes.length?o(e.value,e.type)-o(t.nodes[0].value,t.nodes[0].type):o(e.value,e.type)-o(t.value,t.type)))}function o(e,t){return"pseudo"===t&&e&&0===e.indexOf("::")?l.pseudoElement:l[t]}const l={universal:0,tag:1,id:2,class:3,attribute:4,selector:5,pseudo:6,pseudoElement:7,string:8,root:9,comment:10},r=t.default().astSync(":link").nodes[0],c=t.default().astSync(":visited").nodes[0],u=t.default().astSync("area[href]").nodes[0];function a(e,n){let o=[];return t.default((e=>{let t=0;if(e.walkPseudos((e=>{":any-link"!==e.value||e.nodes&&e.nodes.length||t++})),!t)return;let l=[];for(let e=0;e<t;e++)n?l.push([r.clone(),c.clone(),u.clone()]):l.push([r.clone(),c.clone()]);(function(...e){const t=[],s=e.length-1;function n(o,l){for(let r=0,c=e[l].length;r<c;r++){const c=o.slice(0);c.push(e[l][r]),l==s?t.push(c):n(c,l+1)}}return n([],0),t})(...l).forEach((t=>{const n=e.clone();n.walkPseudos((e=>{":any-link"!==e.value||e.nodes&&e.nodes.length||e.replaceWith(...t.shift().nodes)})),n.walk((e=>{"nodes"in e&&(e.nodes.forEach((e=>{s(e)})),s(e))})),o.push(n.toString())}))})).processSync(e),o}const d=/:any-link/;function i(e){const t={preserve:!0,...e},s={areaHrefNeedsFixing:!1,...Object(t.subFeatures)};return{postcssPlugin:"postcss-pseudo-class-any-link",Rule(e,{result:n}){if(!d.test(e.selector))return;const o=e.raws.selector&&e.raws.selector.raw||e.selector;":"!==o[o.length-1]&&function(e,t,s,n){let o=[],l=[];try{for(let t=0;t<e.selectors.length;t++){const s=e.selectors[t],r=a(s,n);r.length?o.push(...r):l.push(s)}}catch(s){return void e.warn(t,`Failed to parse selector : ${e.selector}`)}o.length&&(e.cloneBefore({selectors:o}),s?l.length&&e.cloneBefore({selectors:l}):l.length?e.selectors=l:e.remove())}(e,n,t.preserve,s.areaHrefNeedsFixing)}}}i.postcss=!0,module.exports=i;
