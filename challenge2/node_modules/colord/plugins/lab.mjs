var a=function(a){return"string"==typeof a?a.length>0:"number"==typeof a},t=function(a,t,r){return void 0===t&&(t=0),void 0===r&&(r=Math.pow(10,t)),Math.round(r*a)/r+0},r=function(a,t,r){return void 0===t&&(t=0),void 0===r&&(r=1),a>r?r:a>t?a:t},n=function(a){var t=a/255;return t<.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},u=function(a){return 255*(a>.0031308?1.055*Math.pow(a,1/2.4)-.055:12.92*a)},o=96.422,e=100,b=82.521,l=function(a){var t,n,o={x:.9555766*(t=a).x+-.0230393*t.y+.0631636*t.z,y:-.0282895*t.x+1.0099416*t.y+.0210077*t.z,z:.0122982*t.x+-.020483*t.y+1.3299098*t.z};return n={r:u(.032404542*o.x-.015371385*o.y-.004985314*o.z),g:u(-.00969266*o.x+.018760108*o.y+41556e-8*o.z),b:u(556434e-9*o.x-.002040259*o.y+.010572252*o.z),a:a.a},{r:r(n.r,0,255),g:r(n.g,0,255),b:r(n.b,0,255),a:r(n.a)}},h=function(a){var t=n(a.r),u=n(a.g),l=n(a.b);return function(a){return{x:r(a.x,0,o),y:r(a.y,0,e),z:r(a.z,0,b),a:r(a.a)}}(function(a){return{x:1.0478112*a.x+.0228866*a.y+-.050127*a.z,y:.0295424*a.x+.9904844*a.y+-.0170491*a.z,z:-.0092345*a.x+.0150436*a.y+.7521316*a.z,a:a.a}}({x:100*(.4124564*t+.3575761*u+.1804375*l),y:100*(.2126729*t+.7151522*u+.072175*l),z:100*(.0193339*t+.119192*u+.9503041*l),a:a.a}))},i=216/24389,p=24389/27,y=function(t){var n=t.l,u=t.a,o=t.b,e=t.alpha,b=void 0===e?1:e;if(!a(n)||!a(u)||!a(o))return null;var l=function(a){return{l:r(a.l,0,400),a:a.a,b:a.b,alpha:r(a.alpha)}}({l:Number(n),a:Number(u),b:Number(o),alpha:Number(b)});return c(l)},c=function(a){var t=(a.l+16)/116,r=a.a/500+t,n=t-a.b/200;return l({x:(Math.pow(r,3)>i?Math.pow(r,3):(116*r-16)/p)*o,y:(a.l>8?Math.pow((a.l+16)/116,3):a.l/p)*e,z:(Math.pow(n,3)>i?Math.pow(n,3):(116*n-16)/p)*b,a:a.alpha})};export default function(a,r){a.prototype.toLab=function(){return r=h(this.rgba),u=r.y/e,l=r.z/b,n=(n=r.x/o)>i?Math.cbrt(n):(p*n+16)/116,a={l:116*(u=u>i?Math.cbrt(u):(p*u+16)/116)-16,a:500*(n-u),b:200*(u-(l=l>i?Math.cbrt(l):(p*l+16)/116)),alpha:r.a},{l:t(a.l,2),a:t(a.a,2),b:t(a.b,2),alpha:t(a.alpha,2)};var a,r,n,u,l},r.object.push([y,"lab"])}
